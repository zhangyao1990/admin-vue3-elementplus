(window.webpackJsonp=window.webpackJsonp||[]).push([["setting-role","setting-role-permission","setting-role-save"],{"1a54":function(e,t,o){"use strict";o("f1cd")},2083:function(e,t,o){"use strict";o.r(t);var l=o("f7fc");const a={class:"left-panel"},s=Object(l.createTextVNode)("权限设置"),c={class:"right-panel"},i={class:"right-panel-search"},r=Object(l.createTextVNode)("查看"),n=Object(l.createTextVNode)("编辑"),d=Object(l.createTextVNode)("删除");var b=o("2a626"),p=o("73f2"),m={name:"role",components:{saveDialog:b.default,permissionDialog:p.default},data(){return{dialog:{save:!1,permission:!1},apiObj:this.$API.system.role.list,selection:[],search:{keyword:null}}},methods:{add(){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open()})},table_edit(e){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("edit").setData(e)})},table_show(e){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("show").setData(e)})},permission(){this.dialog.permission=!0,this.$nextTick(()=>{this.$refs.permissionDialog.open()})},async table_del(e){var t={id:e.id},o=await this.$API.system.post.post(t);200==o.code?(this.$refs.table.refresh(),this.$message.success("删除成功")):this.$alert(o.message,"提示",{type:"error"})},async batch_del(){this.$confirm(`确定删除选中的 ${this.selection.length} 项吗？如果删除项中含有子集将会被一并删除`,"提示",{type:"warning"}).then(()=>{const e=this.$loading();this.$refs.table.refresh(),e.close(),this.$message.success("操作成功")}).catch(()=>{})},selectionChange(e){this.selection=e},upsearch(){},filterTree(e){var t=null;return function o(l){l.forEach(l=>{l.id==e&&(t=l),l.children&&o(l.children)})}(this.$refs.table.tableData),t},handleSaveSuccess(e,t){("add"==t||"edit"==t)&&this.$refs.table.refresh()}}},h=o("b3f2");const u=o.n(h)()(m,[["render",function(e,t,o,b,p,m){const h=Object(l.resolveComponent)("el-button"),u=Object(l.resolveComponent)("el-input"),O=Object(l.resolveComponent)("el-header"),j=Object(l.resolveComponent)("el-table-column"),f=Object(l.resolveComponent)("el-divider"),v=Object(l.resolveComponent)("el-popconfirm"),g=Object(l.resolveComponent)("zyTable"),C=Object(l.resolveComponent)("el-main"),V=Object(l.resolveComponent)("el-container"),w=Object(l.resolveComponent)("save-dialog"),k=Object(l.resolveComponent)("permission-dialog");return Object(l.openBlock)(),Object(l.createElementBlock)(l.Fragment,null,[Object(l.createVNode)(V,null,{default:Object(l.withCtx)(()=>[Object(l.createVNode)(O,null,{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",a,[Object(l.createVNode)(h,{type:"primary",icon:"el-icon-plus",onClick:m.add},null,8,["onClick"]),Object(l.createVNode)(h,{type:"danger",plain:"",icon:"el-icon-delete",disabled:0==p.selection.length,onClick:m.batch_del},null,8,["disabled","onClick"]),Object(l.createVNode)(h,{type:"primary",plain:"",disabled:1!=p.selection.length,onClick:m.permission},{default:Object(l.withCtx)(()=>[s]),_:1},8,["disabled","onClick"])]),Object(l.createElementVNode)("div",c,[Object(l.createElementVNode)("div",i,[Object(l.createVNode)(u,{modelValue:p.search.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>p.search.keyword=e),placeholder:"角色名称",clearable:""},null,8,["modelValue"]),Object(l.createVNode)(h,{type:"primary",icon:"el-icon-search",onClick:m.upsearch},null,8,["onClick"])])])]),_:1}),Object(l.createVNode)(C,{class:"nopadding"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(g,{ref:"table",apiObj:p.apiObj,"row-key":"id",onSelectionChange:m.selectionChange,hidePagination:""},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(j,{type:"selection",width:"50"}),Object(l.createVNode)(j,{label:"#",type:"index",width:"50"}),Object(l.createVNode)(j,{label:"角色名称",prop:"label",width:"250"}),Object(l.createVNode)(j,{label:"别名",prop:"alias",width:"150"}),Object(l.createVNode)(j,{label:"排序",prop:"sort",width:"150"}),Object(l.createVNode)(j,{label:"操作",fixed:"right",align:"right",width:"140"},{default:Object(l.withCtx)(e=>[Object(l.createVNode)(h,{type:"text",size:"small",onClick:t=>m.table_show(e.row,e.$index)},{default:Object(l.withCtx)(()=>[r]),_:2},1032,["onClick"]),Object(l.createVNode)(f,{direction:"vertical"}),Object(l.createVNode)(h,{type:"text",size:"small",onClick:t=>m.table_edit(e.row,e.$index)},{default:Object(l.withCtx)(()=>[n]),_:2},1032,["onClick"]),Object(l.createVNode)(f,{direction:"vertical"}),Object(l.createVNode)(v,{title:"确定删除吗？",onConfirm:t=>m.table_del(e.row,e.$index)},{reference:Object(l.withCtx)(()=>[Object(l.createVNode)(h,{type:"text",size:"small"},{default:Object(l.withCtx)(()=>[d]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["apiObj","onSelectionChange"])]),_:1})]),_:1}),p.dialog.save?(Object(l.openBlock)(),Object(l.createBlock)(w,{key:0,ref:"saveDialog",onSuccess:m.handleSaveSuccess,onClosed:t[1]||(t[1]=e=>p.dialog.save=!1)},null,8,["onSuccess"])):Object(l.createCommentVNode)("",!0),p.dialog.permission?(Object(l.openBlock)(),Object(l.createBlock)(k,{key:1,ref:"permissionDialog",onClosed:t[2]||(t[2]=e=>p.dialog.permission=!1)},null,512)):Object(l.createCommentVNode)("",!0)],64)}]]);t.default=u},"2a626":function(e,t,o){"use strict";o.r(t);var l=o("f7fc");const a=Object(l.createTextVNode)("取 消"),s=Object(l.createTextVNode)("保 存");var c={emits:["success","closed"],data:()=>({mode:"add",titleMap:{add:"新增",edit:"编辑",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",label:"",alias:"",sort:1,parentId:""},rules:{sort:[{required:!0,message:"请输入排序",trigger:"change"}],label:[{required:!0,message:"请输入角色名称"}],alias:[{required:!0,message:"请输入角色别名"}]},groups:[],groupsProps:{value:"id",emitPath:!1,checkStrictly:!0}}),mounted(){this.getGroup()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getGroup(){var e=await this.$API.system.role.list.get();this.groups=e.data},submit(){this.$refs.dialogForm.validate(async e=>{if(e){this.isSaveing=!0;var t=await this.$API.system.post.post(this.form);this.isSaveing=!1,200==t.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(t.message,"提示",{type:"error"})}})},setData(e){this.form.id=e.id,this.form.label=e.label,this.form.alias=e.alias,this.form.sort=e.sort,this.form.parentId=e.parentId}}},i=o("b3f2");const r=o.n(i)()(c,[["render",function(e,t,o,c,i,r){const n=Object(l.resolveComponent)("el-cascader"),d=Object(l.resolveComponent)("el-form-item"),b=Object(l.resolveComponent)("el-input"),p=Object(l.resolveComponent)("el-input-number"),m=Object(l.resolveComponent)("el-form"),h=Object(l.resolveComponent)("el-button"),u=Object(l.resolveComponent)("el-dialog");return Object(l.openBlock)(),Object(l.createBlock)(u,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":t[6]||(t[6]=e=>i.visible=e),width:500,"destroy-on-close":"",onClosed:t[7]||(t[7]=t=>e.$emit("closed"))},{footer:Object(l.withCtx)(()=>[Object(l.createVNode)(h,{onClick:t[4]||(t[4]=e=>i.visible=!1)},{default:Object(l.withCtx)(()=>[a]),_:1}),"show"!=i.mode?(Object(l.openBlock)(),Object(l.createBlock)(h,{key:0,type:"primary",loading:i.isSaveing,onClick:t[5]||(t[5]=e=>r.submit())},{default:Object(l.withCtx)(()=>[s]),_:1},8,["loading"])):Object(l.createCommentVNode)("",!0)]),default:Object(l.withCtx)(()=>[Object(l.createVNode)(m,{model:i.form,rules:i.rules,disabled:"show"==i.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(d,{label:"上级角色",prop:"parentId"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(n,{modelValue:i.form.parentId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.parentId=e),options:i.groups,props:i.groupsProps,"show-all-levels":!1,clearable:"",style:{width:"100%"}},null,8,["modelValue","options","props"])]),_:1}),Object(l.createVNode)(d,{label:"角色名称",prop:"label"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(b,{modelValue:i.form.label,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.label=e),clearable:""},null,8,["modelValue"])]),_:1}),Object(l.createVNode)(d,{label:"角色别名",prop:"alias"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(b,{modelValue:i.form.alias,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.alias=e),clearable:""},null,8,["modelValue"])]),_:1}),Object(l.createVNode)(d,{label:"排序",prop:"sort"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(p,{modelValue:i.form.sort,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.sort=e),"controls-position":"right",min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","disabled"])]),_:1},8,["title","modelValue"])}]]);t.default=r},"73f2":function(e,t,o){"use strict";o.r(t);var l=o("f7fc");const a={class:"treeMain"},s={class:"treeMain"},c={style:{float:"left"}},i={style:{float:"right",color:"#8492a6","font-size":"12px"}},r=(e=>(Object(l.pushScopeId)("data-v-0b459820"),e=e(),Object(l.popScopeId)(),e))(()=>Object(l.createElementVNode)("div",{class:"el-form-item-msg"},"用于控制角色登录后控制台的视图",-1)),n=Object(l.createTextVNode)("取 消"),d=Object(l.createTextVNode)("保 存");var b={emits:["success","closed"],data:()=>({visible:!1,isSaveing:!1,menu:{list:[],checked:["test","system","user","role"],props:{label:e=>e.meta.title}},group:{list:[],checked:[],props:{}},dashboard:"0",dashboardOptions:[{value:"0",label:"数据统计",views:"stats"},{value:"1",label:"工作台",views:"work"}]}),mounted(){this.getMenu(),this.getGroup()},methods:{open(){this.visible=!0},submit(){this.isSaveing=!0,setTimeout(()=>{this.isSaveing=!1,this.visible=!1,this.$message.success("操作成功"),this.$emit("success")},1e3)},async getMenu(){var e=await this.$API.system.menu.list.get();this.menu.list=e.data},getGroup(){this.group.list=[{label:"JL00"},{label:"LP01"},{label:"LP07"},{label:"SL01"},{label:"TL06"},{label:"TL09"},{label:"YP07"}]}}},p=(o("1a54"),o("b3f2"));const m=o.n(p)()(b,[["render",function(e,t,o,b,p,m){const h=Object(l.resolveComponent)("el-tree"),u=Object(l.resolveComponent)("el-tab-pane"),O=Object(l.resolveComponent)("el-option"),j=Object(l.resolveComponent)("el-select"),f=Object(l.resolveComponent)("el-form-item"),v=Object(l.resolveComponent)("el-form"),g=Object(l.resolveComponent)("el-tabs"),C=Object(l.resolveComponent)("el-button"),V=Object(l.resolveComponent)("el-dialog");return Object(l.openBlock)(),Object(l.createBlock)(V,{title:"角色权限设置",modelValue:p.visible,"onUpdate:modelValue":t[3]||(t[3]=e=>p.visible=e),width:500,"destroy-on-close":"",onClosed:t[4]||(t[4]=t=>e.$emit("closed"))},{footer:Object(l.withCtx)(()=>[Object(l.createVNode)(C,{onClick:t[1]||(t[1]=e=>p.visible=!1)},{default:Object(l.withCtx)(()=>[n]),_:1}),Object(l.createVNode)(C,{type:"primary",loading:p.isSaveing,onClick:t[2]||(t[2]=e=>m.submit())},{default:Object(l.withCtx)(()=>[d]),_:1},8,["loading"])]),default:Object(l.withCtx)(()=>[Object(l.createVNode)(g,{"tab-position":"top"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(u,{label:"菜单权限"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",a,[Object(l.createVNode)(h,{ref:"menu","node-key":"name",data:p.menu.list,"default-checked-keys":p.menu.checked,props:p.menu.props,"show-checkbox":""},null,8,["data","default-checked-keys","props"])])]),_:1}),Object(l.createVNode)(u,{label:"部门权限"},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("div",s,[Object(l.createVNode)(h,{ref:"group","node-key":"name",data:p.group.list,"default-checked-keys":p.group.checked,props:p.group.props,"show-checkbox":""},null,8,["data","default-checked-keys","props"])])]),_:1}),Object(l.createVNode)(u,{label:"控制台"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(v,{"label-width":"100px","label-position":"left"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(f,{label:"控制台视图"},{default:Object(l.withCtx)(()=>[Object(l.createVNode)(j,{modelValue:p.dashboard,"onUpdate:modelValue":t[0]||(t[0]=e=>p.dashboard=e),placeholder:"请选择"},{default:Object(l.withCtx)(()=>[(Object(l.openBlock)(!0),Object(l.createElementBlock)(l.Fragment,null,Object(l.renderList)(p.dashboardOptions,e=>(Object(l.openBlock)(),Object(l.createBlock)(O,{key:e.value,label:e.label,value:e.value},{default:Object(l.withCtx)(()=>[Object(l.createElementVNode)("span",c,Object(l.toDisplayString)(e.label),1),Object(l.createElementVNode)("span",i,Object(l.toDisplayString)(e.views),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),r]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}],["__scopeId","data-v-0b459820"]]);t.default=m},f1cd:function(e,t,o){}}]);