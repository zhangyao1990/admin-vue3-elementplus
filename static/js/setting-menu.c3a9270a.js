(window.webpackJsonp=window.webpackJsonp||[]).push([["setting-menu"],{"9c30":function(e,t,n){},a7c5:function(e,t,n){"use strict";n("9c30")},c584:function(e,t,n){"use strict";n.r(t);var a=n("f7fc");const o={class:"custom-tree-node el-tree-node__label"},i={class:"label"},l={class:"do"},s=["onClick"];var c=n("0dc2");let d=1;var r={name:"settingMenu",components:{save:c.default},data:()=>({menuloading:!1,menuList:[],menuProps:{label:e=>e.meta.title},menuFilterText:""}),watch:{menuFilterText(e){this.$refs.menu.filter(e)}},mounted(){this.getMenu()},methods:{async getMenu(){this.menuloading=!0;var e=await this.$API.system.menu.list.get();this.menuloading=!1,this.menuList=e.data},menuClick(e,t){var n=1==t.level?void 0:t.parent.data.id;this.$refs.save.setData(e,n),this.$refs.main.$el.scrollTop=0},menuFilterNode:(e,t)=>!e||-1!==t.meta.title.indexOf(e),nodeDrop(e,t,n){this.$refs.save.setData({}),this.$message(`拖拽对象：${e.data.meta.title}, 释放对象：${t.data.meta.title}, 释放对象的位置：${n}`)},async add(e,t){var n="未命名"+d++,a={parentId:t?t.id:"",name:n,path:"",component:"",meta:{title:n,type:"menu"}};this.menuloading=!0;var o=await this.$API.system.post.post(a);this.menuloading=!1,a.id=o.data,this.$refs.menu.append(a,e),this.$refs.menu.setCurrentKey(a.id);var i=e?e.data.id:"";this.$refs.save.setData(a,i)},async delMenu(){var e=this.$refs.menu.getCheckedNodes();if(0==e.length)return this.$message.warning("请选择需要删除的项"),!1;if("confirm"!=await this.$confirm("确认删除已选择的菜单吗？","提示",{type:"warning",confirmButtonText:"删除",confirmButtonClass:"el-button--danger"}).catch(()=>{}))return!1;this.menuloading=!0;var t={ids:e.map(e=>e.id)},n=await this.$API.system.post.post(t);this.menuloading=!1,200==n.code?e.forEach(e=>{this.$refs.menu.remove(e)}):this.$message.warning(n.message)}}},m=(n("a7c5"),n("b3f2"));const u=n.n(m)()(r,[["render",function(e,t,n,c,d,r){const m=Object(a.resolveComponent)("el-input"),u=Object(a.resolveComponent)("el-header"),p=Object(a.resolveComponent)("el-tree"),h=Object(a.resolveComponent)("el-main"),b=Object(a.resolveComponent)("el-button"),f=Object(a.resolveComponent)("el-footer"),O=Object(a.resolveComponent)("el-container"),j=Object(a.resolveComponent)("el-aside"),g=Object(a.resolveComponent)("save"),v=Object(a.resolveDirective)("loading");return Object(a.openBlock)(),Object(a.createBlock)(O,null,{default:Object(a.withCtx)(()=>[Object(a.withDirectives)(Object(a.createVNode)(j,{width:"280px"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(O,null,{default:Object(a.withCtx)(()=>[Object(a.createVNode)(u,null,{default:Object(a.withCtx)(()=>[Object(a.createVNode)(m,{placeholder:"输入关键字进行过滤",modelValue:d.menuFilterText,"onUpdate:modelValue":t[0]||(t[0]=e=>d.menuFilterText=e),clearable:""},null,8,["modelValue"])]),_:1}),Object(a.createVNode)(h,{class:"nopadding"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(p,{ref:"menu",class:"menu","node-key":"id",data:d.menuList,props:d.menuProps,draggable:"","highlight-current":"","expand-on-click-node":!1,"check-strictly":"","show-checkbox":"","filter-node-method":r.menuFilterNode,onNodeClick:r.menuClick,onNodeDrop:r.nodeDrop},{default:Object(a.withCtx)(({node:e,data:t})=>[Object(a.createElementVNode)("span",o,[Object(a.createElementVNode)("span",i,Object(a.toDisplayString)(e.label),1),Object(a.createElementVNode)("span",l,[Object(a.createElementVNode)("i",{class:"el-icon-plus",onClick:Object(a.withModifiers)(n=>r.add(e,t),["stop"])},null,8,s)])])]),_:1},8,["data","props","filter-node-method","onNodeClick","onNodeDrop"])]),_:1}),Object(a.createVNode)(f,{style:{height:"51px"}},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(b,{type:"primary",size:"mini",icon:"el-icon-plus",onClick:t[1]||(t[1]=e=>r.add())}),Object(a.createVNode)(b,{type:"danger",size:"mini",plain:"",icon:"el-icon-delete",onClick:r.delMenu},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[v,d.menuloading]]),Object(a.createVNode)(O,null,{default:Object(a.withCtx)(()=>[Object(a.createVNode)(h,{class:"nopadding",style:{padding:"20px"},ref:"main"},{default:Object(a.withCtx)(()=>[Object(a.createVNode)(g,{ref:"save",menu:d.menuList},null,8,["menu"])]),_:1},512)]),_:1})]),_:1})}],["__scopeId","data-v-6f906ee6"]]);t.default=u}}]);